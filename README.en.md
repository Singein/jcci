#### [中文简体](https://github.com/baikaishuipp/jcci/blob/main/README.md) OR [English](https://github.com/baikaishuipp/jcci/blob/main/README.en.md)
# jcci

#### Description
Java code commit impact analysis, is a pure python library that analyzes the impact of two git submissions of Java projects on the project and generates tree chart data.

PYPI: [jcci](https://pypi.org/project/jcci/) (It will be several versions behind github)

#### Software Architecture
The general principle is the same as Find Usage of Idea, locate the impact of the code through code changes, and continuously traverse the affected classes and methods until the top controller layer is found

The code is mainly written by python and mainly involves 2 libraries:

* javalang  java file syntax parsing library
* unidiff  git diff information parsing library

Obtain information such as import class extends implements declarators methods of each Java file through javalang syntax analysis

Parse git diff information through unidiff (diff file, added_line_num, removed_lin_num)

Then judge which classes and methods are affected according to the code lines added or deleted in the file, and continuously traverse the affected classes and methods until you find the top controller layer

By passing in the commit id of the project git address branch twice, the impact of code changes between the two commit ids can be analyzed, and the tree diagram data can be generated to display the affected links.

#### Installation

##### Method 1: pypi installation (will be several versions behind github)
```
$ pip install jcci
```

##### Method 2: Clone the project (recommended)
```
$ git clone https://github.com/baikaishuipp/jcci.git
```

#### Instructions
##### Method 1: pypi installation (will be several versions behind github)
Start a new python project, add a new python file, code example:

```
from jcci import jcci

# Compare different commits on the same branch
jcci.analyze('git@xxxx.git','master','commit_id1','commit_id2', 'username1')

# Compare different branches
jcci.analyze_branches('git@xxxx.git','branch_1','branch_2', 'username1')
```

##### Method 2: Clone the project (recommended)
After the project is cloned, create a new python file and introduce jcci in the src directory of the jcci project.
```
from path.to.jcci.src.jcci import jcci

# Compare different commits on the same branch
jcci.analyze('git@xxxx.git','master','commit_id1','commit_id2', 'username1')

# Compare different branches
jcci.analyze_branches('git@xxxx.git','branch_1','branch_2', 'username1')
```

###### Parameter Description:
* project_git_url - project git address, the code uses the native git configuration to clone the code, ensure the native git permissions or splice the url through username, password/token to clone the code. Example: https://userName:password@github.com/xxx.git or https://token@github.com/xxx.git
* username1 - Enter whatever you want. In order to avoid incorrect results caused by concurrent analysis of the same project, when user 1 analyzes project A, user B needs to wait, so this parameter is set.

At the same time, the project will be cloned in the directory and then analyzed to generate a file with the suffix format commit_id1...commit_id2.cci, which contains the tree diagram data generated by the analysis results, download [jcci-result.html](https://github.com/baikaishuipp/jcci/blob/main/jcci-result.html) , upload analyze result file end with .cci, then can be displayed through the view.

##### CCI result
![result](./images/cci-result.png)

##### CCI result tree view
![treeView](./images/cii-result-tree.png)


#### Contribution

1.  Fork the repository
2.  Create Feat_xxx branch
3.  Commit your code
4.  Create Pull Request

#### If this tool is helpful to you, please click star in the upper right corner ⭐， thanks~~~~

#### Communication
Scan QR code via WeChat app, and comment：JCCI communication

![communicate via Wechat](./images/wechat.jpg) 
